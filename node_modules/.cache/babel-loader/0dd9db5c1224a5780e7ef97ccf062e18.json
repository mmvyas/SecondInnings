{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\MMV\\\\Desktop\\\\Final_System\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\MMV\\\\Desktop\\\\Final_System\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\MMV\\\\Desktop\\\\Final_System\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\MMV\\\\Desktop\\\\Final_System\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\MMV\\\\Desktop\\\\Final_System\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\MMV\\\\Desktop\\\\Final_System\\\\src\\\\components\\\\Map\\\\map2.js\";\nimport React from 'react';\nimport Chart from './Chart';\nimport L from 'leaflet';\nimport './vis.css';\nimport lga from './vic-simplist.json';\nimport lgaFields from './geojsonprops.json';\n\nvar MapPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MapPage, _React$Component);\n\n  function MapPage(props) {\n    var _this;\n\n    _classCallCheck(this, MapPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MapPage).call(this, props));\n\n    _this.onEachFeatures = function (feature, layer) {\n      layer.on({\n        // click: this.onClickFeature(feature)\n        click: function click() {\n          return _this.setState({\n            currentLGA: feature.properties.lg_ply_pid,\n            currentLGAName: feature.properties.vic_lga__3\n          });\n        }\n      });\n      layer.on({\n        click: _this.zoomToFeature\n      });\n    };\n\n    _this.getColor2 = function (d) {\n      return d > 150 ? '#800026' : d > 130 ? '#BD0026' : d > 110 ? '#E31A1C' : d > 90 ? '#FC4E2A' : d > 70 ? '#FD8D3C' : d > 50 ? '#FEB24C' : d > 30 ? '#FED976' : '#FFEDA0';\n    };\n\n    _this.style2 = function (feature) {\n      return {\n        fillColor: _this.getColor2(_this.findCriminal(feature.properties.lg_ply_pid)),\n        weight: 2,\n        opacity: 1,\n        color: 'white',\n        dashArray: '3',\n        fillOpacity: 0.7\n      };\n    };\n\n    _this.findCriminal = function (id) {\n      return lgaFields[id].criminal_rate;\n    };\n\n    _this.zoomToFeature = function (e) {\n      _this.map.fitBounds(e.target.getBounds());\n    };\n\n    var choosedArea = _this.props.chooseArea;\n    console.log(choosedArea);\n\n    if (choosedArea !== null) {\n      console.log(\"check\");\n\n      _this.state({\n        currentLGA: choosedArea.id,\n        currentLGAName: choosedArea.name\n      });\n    } else {\n      _this.state = {\n        currentLGA: null,\n        currentLGAName: null\n      };\n    }\n\n    return _this;\n  }\n\n  _createClass(MapPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var displayArea = this.props.lgas;\n      console.log(displayArea);\n      var fiveGeoJson = null;\n\n      if (displayArea != null) {\n        var displayGeoJson = [];\n\n        for (var i = 0; i < displayArea.topFiveAreas.length; i++) {\n          for (var j = 0; j < lga.features.length; j++) {\n            if (displayArea.topFiveAreas[i].Lg_Ply_Pid == lga.features[j].properties.lg_ply_pid) {\n              displayGeoJson.push(lga.features[j]);\n            }\n          }\n        }\n\n        fiveGeoJson = {\n          \"type\": \"FeatureCollection\",\n          \"features\": []\n        };\n        fiveGeoJson.features = displayGeoJson;\n      } else {\n        fiveGeoJson = lga;\n      }\n\n      this.map = L.map('map').setView([-36.202806, 144.990440], 7);\n      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {\n        maxZoom: 18,\n        attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, ' + '<a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, ' + 'Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        id: 'mapbox.light'\n      }).addTo(this.map);\n      var styleType = null;\n      styleType = this.style2;\n      var legend = L.control({\n        position: 'bottomright'\n      });\n\n      legend.onAdd = function (map) {\n        var div = L.DomUtil.create('div', 'info legend');\n        div.innerHTML = '<i style=\"background:#FFEDA0\"></i> 0–30<br>' + '<i style=\"background:#FED976\"></i> 30-50<br>' + '<i style=\"background:#FEB24C\"></i> 50-70<br>' + '<i style=\"background:#FD8D3C\"></i> 70-90<br>' + '<i style=\"background:#FC4E2A\"></i> 90-110<br>' + '<i style=\"background:#E31A1C\"></i> 110-130<br>' + '<i style=\"background:#BD0026\"></i> 130-150<br>' + '<i style=\"background:#800026\"></i> 150+</div>';\n        return div;\n      };\n\n      legend.addTo(this.map);\n      this.geojson = L.geoJson(fiveGeoJson, {\n        onEachFeature: this.onEachFeatures,\n        style: styleType\n      }).addTo(this.map);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"mapChart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"map\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(Chart, {\n        lga: this.state.currentLGA,\n        lgaName: this.state.currentLGAName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return MapPage;\n}(React.Component);\n\nexport { MapPage as default };","map":{"version":3,"sources":["C:\\Users\\MMV\\Desktop\\Final_System\\src\\components\\Map\\map2.js"],"names":["React","Chart","L","lga","lgaFields","MapPage","props","onEachFeatures","feature","layer","on","click","setState","currentLGA","properties","lg_ply_pid","currentLGAName","vic_lga__3","zoomToFeature","getColor2","d","style2","fillColor","findCriminal","weight","opacity","color","dashArray","fillOpacity","id","criminal_rate","e","map","fitBounds","target","getBounds","choosedArea","chooseArea","console","log","state","name","displayArea","lgas","fiveGeoJson","displayGeoJson","i","topFiveAreas","length","j","features","Lg_Ply_Pid","push","setView","tileLayer","maxZoom","attribution","addTo","styleType","legend","control","position","onAdd","div","DomUtil","create","innerHTML","geojson","geoJson","onEachFeature","style","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Chart from './Chart'\r\nimport L from 'leaflet'\r\nimport './vis.css'\r\nimport lga from './vic-simplist.json'\r\nimport lgaFields from './geojsonprops.json'\r\n\r\n\r\nexport default class MapPage extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const choosedArea = this.props.chooseArea \r\n        console.log(choosedArea)\r\n        if (choosedArea !== null){\r\n            console.log(\"check\")\r\n            this.state({\r\n                currentLGA: choosedArea.id,\r\n                currentLGAName: choosedArea.name\r\n            })\r\n        }\r\n        else{\r\n        this.state = {\r\n            currentLGA: null,\r\n            currentLGAName: null\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n    onEachFeatures = (feature, layer) => {\r\n        layer.on({\r\n            // click: this.onClickFeature(feature)\r\n            click: () => this.setState({\r\n                currentLGA: feature.properties.lg_ply_pid,\r\n                currentLGAName: feature.properties.vic_lga__3\r\n            })\r\n        })\r\n        layer.on({\r\n            click: this.zoomToFeature\r\n        });\r\n\r\n    }\r\n\r\n\r\n    getColor2 = (d) => {\r\n        return d > 150 ? '#800026' :\r\n            d > 130 ? '#BD0026' :\r\n                d > 110 ? '#E31A1C' :\r\n                    d > 90 ? '#FC4E2A' :\r\n                        d > 70 ? '#FD8D3C' :\r\n                            d > 50 ? '#FEB24C' :\r\n                                d > 30 ? '#FED976' :\r\n                                    '#FFEDA0';\r\n    }\r\n\r\n    style2 = (feature) => {\r\n        return {\r\n            fillColor: this.getColor2(this.findCriminal(feature.properties.lg_ply_pid)),\r\n            weight: 2,\r\n            opacity: 1,\r\n            color: 'white',\r\n            dashArray: '3',\r\n            fillOpacity: 0.7\r\n        };\r\n\r\n    }\r\n\r\n    findCriminal = (id) => {\r\n        return (lgaFields[id].criminal_rate)\r\n\r\n    }\r\n\r\n    zoomToFeature = (e) => {\r\n        this.map.fitBounds(e.target.getBounds());\r\n    }\r\n\r\n    componentDidMount() {\r\n        const displayArea = this.props.lgas\r\n        console.log(displayArea)\r\n        let fiveGeoJson = null\r\n        if (displayArea != null){\r\n        let displayGeoJson = []\r\n        for (var i = 0; i<displayArea.topFiveAreas.length;i++){\r\n            for (var j = 0; j<lga.features.length;j++){\r\n                if (displayArea.topFiveAreas[i].Lg_Ply_Pid == lga.features[j].properties.lg_ply_pid){\r\n                displayGeoJson.push(lga.features[j])\r\n                }\r\n            }\r\n        }\r\n        fiveGeoJson = {\"type\":\"FeatureCollection\", \"features\": []}\r\n        fiveGeoJson.features = displayGeoJson\r\n    }\r\n    else{\r\n        fiveGeoJson = lga\r\n    }\r\n\r\n        this.map = L.map('map').setView([-36.202806, 144.990440], 7);\r\n        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {\r\n            maxZoom: 18,\r\n            attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, ' +\r\n                '<a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, ' +\r\n                'Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n            id: 'mapbox.light'\r\n        })\r\n        .addTo(this.map);\r\n\r\n\r\n        let styleType = null\r\n        \r\n            styleType = this.style2\r\n            var legend = L.control({ position: 'bottomright' });\r\n\r\n            legend.onAdd = function (map) {\r\n                var div = L.DomUtil.create('div', 'info legend')\r\n                div.innerHTML =\r\n                '<i style=\"background:#FFEDA0\"></i> 0–30<br>'+\r\n                '<i style=\"background:#FED976\"></i> 30-50<br>'+\r\n                '<i style=\"background:#FEB24C\"></i> 50-70<br>'+\r\n                '<i style=\"background:#FD8D3C\"></i> 70-90<br>'+\r\n                '<i style=\"background:#FC4E2A\"></i> 90-110<br>'+\r\n                '<i style=\"background:#E31A1C\"></i> 110-130<br>'+\r\n                '<i style=\"background:#BD0026\"></i> 130-150<br>'+\r\n                '<i style=\"background:#800026\"></i> 150+</div>'\r\n\r\n                return div;\r\n            };\r\n\r\n            legend.addTo(this.map);\r\n        \r\n\r\n\r\n        this.geojson = L.geoJson(fiveGeoJson, {\r\n            onEachFeature: this.onEachFeatures,\r\n            style: styleType\r\n        }).addTo(this.map);\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (<div className='mapChart'>\r\n        <div id=\"map\">\r\n        </div>\r\n        <Chart lga={this.state.currentLGA}\r\n                lgaName = {this.state.currentLGAName} />\r\n    </div>\r\n        )\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}